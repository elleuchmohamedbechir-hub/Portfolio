services:
  # Backend Service
  - type: web
    name: portfolio-backend
    env: java
    runtime: openjdk
    region: frankfurt
    plan: free
    branch: main
    buildCommand: mvn clean package -DskipTests
    startCommand: java -jar target/*.jar
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: JAVA_VERSION
        value: 17
      - key: SERVER_PORT
        value: 8080
      - key: CORS_ALLOWED_ORIGINS
        value: https://votre-frontend-netlify.app
      # Secrets à ajouter manuellement dans le dashboard Render pour sécurité :
      # - DATABASE_URL
      # - DATABASE_USERNAME
      # - DATABASE_PASSWORD
      # - JWT_SECRET

databases:
  - name: portfolio-db
    databaseName: portfolio_db
    user: portfolio_user
    plan: free
    region: frankfurt
